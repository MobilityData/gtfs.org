# ルート形状

## 形状データ ガイダンス

shapes.txtファイルに含まれるデータは、交通サービスの表現において重要な役割を果たします。適切に構築されたシェイプは、旅行計画アプリケーションでの旅行の視覚化の精度を向上させ、乗客にシームレスな体験を保証します。次の推奨プラクティスは、車両の動きを正確に表し、物理的な移動経路と一致する高品質のシェイプ データを作成するためのガイダンスを提供します

  1. 停車地間の移動経路が直線でない場合は、2 つのポイントのみでシェイプを定義しないでください。シェイプが車両の移動経路を正確に反映していることを確認します。
  
    <img class="center" width="1500" height="100%" src="../../../../assets/shapes-1.png"> 
  
  2. 図形が起点駅から始まり、終点駅で終わるようにします。短すぎたり長すぎたりする図形は避けてください。
  
    <img class="center" width="1500" height="100%" src="../../../../assets/shapes-2a.png"> 
  
    <img class="center" width="1500" height="100%" src="../../../../assets/shapes-2b.png"> 
  
  3. 単一の shape_id で定義されたシェイプ内では、非論理的なバックトラックや不必要なポイントの反転を避けてください。
  
    <img class="center" width="1500" height="100%" src="../../../../assets/shapes-3.png"> 
  
  4. 形状が WGS84 座標系で車両が移動する経路と一致するようにし、異なる座標系によって生じるオフセットを回避します。
  
    - 道路サービス (バスなど) の場合、配置は車両が移動する道路の中心線に従う必要があります。指定された車線がない場合は道路の中心線、車線が指定されている場合は移動方向側の中心線のいずれかにしてもよい。
  
      <img class="center" width="1500" height="100%" src="../../../../assets/shapes-4a.png"> 
  
    - 鉄道サービス（地下鉄、電車、ライトレールなど）の場合、図形は電車が走行する線路に沿っている必要があります。特定のエリアで特定の線路を常に走行するとは限らず、複数の線路が存在する場合は、図形が電車が走行するしてもよいのある線路の範囲内に収まるようにしてください。
  
      <img class="center" width="1500" height="100%" src="../../../../assets/shapes-4b.png"> 
  
  5. 車両がカーブに沿って走行する場合、形状ポイントは、ライダーにとって視覚的にスムーズなプレゼンテーションを可能にするのに十分な密度である必要があります。
  
    <img class="center" width="1500" height="100%" src="../../../../assets/shapes-5.png"> 
  
  6. 線路の配置は、縁石の停止位置、プラットホーム、または乗車位置に対して`ギザギザ`になってはならない。
  
    <img class="center" width="1500" height="100%" src="../../../../assets/shapes-6.png">