# ルート形状(Shapes) {: #shapes}

## ルート形状(Shapes)データに関するガイダンス {: #shapes-data-guidance}


shapes.txt ファイルに含まれるデータは、公共交通サービスの表現において重要な役割を果たします。適切に構築されたルート形状(shape)は、便(trip)検索アプリケーションにおける便の可視化の精度を高め、乗客にシームレスな体験を提供します。以下の推奨される実践方法は、車両の走行経路を正確に表現し、実際の走行経路と整合する高品質なルート形状データを作成するための指針を示します。

1. 停留所等(stop)間の走行経路が直線でない場合、2点だけでルート形状を定義することは避けてください。ルート形状が車両の走行経路を正確に反映するようにしてください。

    <img class="center" width="1500" height="100%" src="../../../../assets/shapes-1.png">


2. ルート形状は始発駅から開始し、終着駅で終了するようにしてください。短すぎる、または長すぎるルート形状は避けてください。

    <img class="center" width="1500" height="100%" src="../../../../assets/shapes-2a.png">

    <img class="center" width="1500" height="100%" src="../../../../assets/shapes-2b.png">

3. 1つの shape_id で定義されるルート形状内では、不合理な逆戻りや不要な点の反転を避けてください。

    <img class="center" width="1500" height="100%" src="../../../../assets/shapes-3.png">

4. ルート形状は WGS84 座標系における車両の走行経路と整合させ、異なる座標系によるずれを避けてください。

    - 道路系サービス（例: バス）の場合、ルート形状は車両が走行する道路の中心線に沿うようにしてください。専用レーンがない場合は道路の中心線に、専用レーンがある場合は走行方向側の中心線に沿わせることができます。

        <img class="center" width="1500" height="100%" src="../../../../assets/shapes-4a.png">

    - 鉄道系サービス（例: 地下鉄、列車、ライトレール）の場合、ルート形状は列車が走行する線路に沿うようにしてください。便(trip)が特定の区間で常に同じ線路を走行するわけではなく、複数の線路が存在する場合は、列車が走行する可能性のある線路の範囲内にルート形状を収めてください。

        <img class="center" width="1500" height="100%" src="../../../../assets/shapes-4b.png">

5. 車両がカーブを走行する場合、ルート形状の点は十分に密に配置し、乗客に対して滑らかに見えるようにしてください。

    <img class="center" width="1500" height="100%" src="../../../../assets/shapes-5.png">

6. ルート形状を縁石停留所、プラットフォーム、または乗車位置に「ジグザグ」させてはいけません。

    <img class="center" width="1500" height="100%" src="../../../../assets/shapes-6.png">
